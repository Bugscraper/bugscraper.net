// Thanks to https://phrase.com/blog/posts/step-step-guide-javascript-localization/

const translations = {
    "en": {
        "language-name": "ğŸ” English",

        "button-steam": "ğŸ› Wishlist on Steam", // "wishlist" is a verb here, not a noun, as in "please wishlist on Steam"
        "button-itchio": "ğŸª Play the demo on itch.io",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Press kit",
        "button-email": "âœ‰ï¸ Email",
        "desc-1": "Welcome to the bugscraper.",
        "desc-2": "Here, pests all around the world come to gather. ",
        "desc-3": "Your mission: stopping them before it is too late!",
        "desc-long-1": "ğŸœ In this platformer shooter, you take the role of <b>Mio</b>, a courageous ant, trying to stop the employees of a bug-filled skyscraper from corrupting the world with a deadly mushroom.",
        "desc-long-2": "ğŸ› You will battle waves of enemies in an elevator as they come for your skin (or rather, exoskeleton) on every floor.",
        "desc-long-3": "ğŸ Using a wide variety of <b>weapons and upgrades</b>, eliminate them and prepare to battle for the next floor!",
        "desc-long-4": "ğŸ Play in <b>solo</b>, or with up to 4 friends in <b>local co-op multiplayer</b>.",
        "screenshot-title": "Screenshots",

        "translation-disclaimer": "Translations with [*] were made with the help of a generative AI model. Please get in touch if you'd like to help me with human-made translations!",
        "contact": "Contact:",
        "email-disclaimer": "(might respond under a different address)",
        "footer-source": "Source code for this website",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
    "fr": {
        "language-name": "ğŸ¥– FranÃ§ais",

        "button-steam": "ğŸ› Wishlistez sur Steam",
        "button-itchio": "ğŸª Jouez Ã  la dÃ©mo sur itch.io",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Kit de presse",
        "button-email": "âœ‰ï¸ Email", 
        "desc-1": "Bienvenue dans le bugscraper.",
        "desc-2": "Ici se retrouvent des bÃªtes du monde entier.",
        "desc-3": "Votre mission : les arrÃªter avant qu'il ne soit trop tard !",
        "desc-long-1": "ğŸœ Dans ce jeu <b>de plateformes et de tir</b>, vous incarnez <b>Mio</b>, une courageuse fourmi, essayant d'empÃªcher les employÃ©s d'un gratte-ciel rempli de bestioles de corrompre le monde avec un champignon mortel.",
        "desc-long-2": "ğŸ› Vous affronterez dans un ascenseur des vagues d'ennemis qui viendront pour votre peau (ou plutÃ´t, votre exosquelette) Ã  chaque Ã©tage.",
        "desc-long-3": "ğŸ Ã€ l'aide d'une grande variÃ©tÃ© <b>d'armes et d'amÃ©liorations</b>, Ã©liminez-les et prÃ©parez-vous au combat pour l'Ã©tage suivant!",
        "desc-long-4": "ğŸ Jouez en <b>solo</b>, ou avec jusqu'Ã  4 amis en <b>multijoueur local coopÃ©ratif</b>.",
        "screenshot-title": "Captures",
    
        "translation-disclaimer": "Les traductions avec (*) ont Ã©tÃ© rÃ©alisÃ©es Ã  l'aide d'un modÃ¨le d'IA gÃ©nÃ©rative. Veuillez me contacter si vous souhaitez m'aider Ã  fournir des traductions faites par des humains !",
        "contact": "Contact :",
        "email-disclaimer": "(les rÃ©ponses peuvent provenir d'une adresse diffÃ©rente)",
        "footer-source": "Code source de ce site web",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
    "es": {
        "language-name": "ğŸŒ® EspaÃ±ol (*)",

        "button-steam": "ğŸ› AÃ±Ã¡delo a tu lista de deseos en Steam",
        "button-itchio": "ğŸª Juega la demo en itch.io",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Kit de prensa",
        "button-email": "âœ‰ï¸ Correo electrÃ³nico",
        "desc-1": "Bienvenido al bugscraper.",
        "desc-2": "AquÃ­ se reÃºnen plagas de todo el mundo.",
        "desc-3": "Tu misiÃ³n: detenerlas antes de que sea demasiado tarde!",
        "desc-long-1": "ğŸœ En este juego de plataformas y disparos, tomas el papel de <b>Mio</b>, una valiente hormiga, que intenta evitar que los empleados de un rascacielos lleno de bichos corrompan el mundo con un hongo mortal.",
        "desc-long-2": "ğŸ› LucharÃ¡s contra oleadas de enemigos en un ascensor mientras vienen por tu piel (o mÃ¡s bien, tu exoesqueleto) en cada piso.",
        "desc-long-3": "ğŸ Usando una gran variedad de <b>armas y mejoras</b>, elimÃ­nalos y prepÃ¡rate para luchar en el siguiente piso!",
        "desc-long-4": "ğŸ Juega en <b>solitario</b> o con hasta 4 amigos en <b>cooperativo local</b>.",
        "screenshot-title": "Capturas de pantalla",

        "translation-disclaimer": "Las traducciones con (*) se hicieron con la ayuda de un modelo de IA generativa. Â¡Por favor, pÃ³ngase en contacto si desea ayudarme con traducciones hechas por humanos!",
        "contact": "Contacto:",
        "email-disclaimer": "(puede responder desde una direcciÃ³n diferente)",
        "footer-source": "CÃ³digo fuente de este sitio web",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
    "de": {
        "language-name": "ğŸº Deutsch (*)",

        "button-steam": "ğŸ› Zur Wunschliste auf Steam hinzufÃ¼gen",
        "button-itchio": "ğŸª Demo auf itch.io spielen",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Pressekit",
        "button-email": "âœ‰ï¸ E-Mail",
        "desc-1": "Willkommen beim Bugscraper.",
        "desc-2": "Hier versammeln sich SchÃ¤dlinge aus aller Welt.",
        "desc-3": "Deine Mission: Sie aufhalten, bevor es zu spÃ¤t ist!",
        "desc-long-1": "ğŸœ In diesem Plattform-Shooter Ã¼bernimmst du die Rolle von <b>Mio</b>, einer mutigen Ameise, die versucht, die Mitarbeiter eines mit KÃ¤fern gefÃ¼llten Wolkenkratzers daran zu hindern, die Welt mit einem tÃ¶dlichen Pilz zu verderben.",
        "desc-long-2": "ğŸ› Du wirst in einem Aufzug gegen Wellen von Feinden kÃ¤mpfen, die auf jeder Etage nach deiner Haut (bzw. deinem Exoskelett) trachten.",
        "desc-long-3": "ğŸ Mit einer Vielzahl von <b>Waffen und Upgrades</b> eliminierst du sie und bereitest dich auf den Kampf in der nÃ¤chsten Etage vor!",
        "desc-long-4": "ğŸ Spiele im <b>Einzelspielermodus</b> oder mit bis zu 4 Freunden im <b>lokalen Koop-Modus</b>.",
        "screenshot-title": "Screenshots",

        "translation-disclaimer": "Ãœbersetzungen mit (*) wurden mit Hilfe eines generativen KI-Modells erstellt. Bitte kontaktieren Sie mich, wenn Sie mir mit menschlichen Ãœbersetzungen helfen mÃ¶chten!",
        "contact": "Kontakt:",
        "email-disclaimer": "(Antworten kÃ¶nnen von einer anderen Adresse kommen)",
        "footer-source": "Quellcode dieser Webseite",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
    "it": {
        "language-name": "ğŸ Italiano (*)",

        "button-steam": "ğŸ› Aggiungi alla lista dei desideri su Steam",
        "button-itchio": "ğŸª Gioca la demo su itch.io",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Cartella stampa",
        "button-email": "âœ‰ï¸ Email",
        "desc-1": "Benvenuto al bugscraper.",
        "desc-2": "Qui si radunano parassiti da tutto il mondo.",
        "desc-3": "La tua missione: fermarli prima che sia troppo tardi!",
        "desc-long-1": "ğŸœ In questo platform shooter, interpreti il ruolo di <b>Mio</b>, una coraggiosa formica che cerca di impedire ai dipendenti di un grattacielo pieno di insetti di corrompere il mondo con un fungo mortale.",
        "desc-long-2": "ğŸ› Combatterai ondate di nemici in un ascensore mentre cercano la tua pelle (o meglio, il tuo esoscheletro) ad ogni piano.",
        "desc-long-3": "ğŸ Usando una vasta gamma di <b>armi e potenziamenti</b>, eliminali e preparati a combattere per il prossimo piano!",
        "desc-long-4": "ğŸ Gioca in <b>solitario</b> o con un massimo di 4 amici in <b>coop locale</b>.",
        "screenshot-title": "Screenshot",

        "translation-disclaimer": "Le traduzioni con (*) sono state realizzate con l'aiuto di un modello di IA generativa. Per favore, contattami se desideri aiutarmi con traduzioni fatte da umani!",
        "contact": "Contatto:",
        "email-disclaimer": "(potrebbe rispondere da un indirizzo diverso)",
        "footer-source": "Codice sorgente di questo sito web",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
    "pt": {
        "language-name": "ğŸ› PortuguÃªs (*)",

        "button-steam": "ğŸ› Adicione Ã  sua lista de desejos no Steam",
        "button-itchio": "ğŸª Jogue a demo no itch.io",
        "button-discord": "ğŸ® Discord", 
        "button-twitter": "ğŸ¦ Twitter", 
        "button-github": "ğŸ˜º GitHub", 
        "button-press": "ğŸ“° Kit de imprensa",
        "button-email": "âœ‰ï¸ Email",
        "desc-1": "Bem-vindo ao bugscraper.",
        "desc-2": "Aqui, pragas de todo o mundo se reÃºnem.",
        "desc-3": "Sua missÃ£o: detÃª-las antes que seja tarde demais!",
        "desc-long-1": "ğŸœ Neste jogo de plataforma e tiro, vocÃª assume o papel de <b>Mio</b>, uma corajosa formiga que tenta impedir que os funcionÃ¡rios de um arranha-cÃ©u cheio de insetos corrompam o mundo com um fungo mortal.",
        "desc-long-2": "ğŸ› VocÃª lutarÃ¡ contra ondas de inimigos em um elevador enquanto eles vÃªm atrÃ¡s da sua pele (ou melhor, do seu exoesqueleto) em cada andar.",
        "desc-long-3": "ğŸ Usando uma grande variedade de <b>armas e melhorias</b>, elimine-os e prepare-se para lutar no prÃ³ximo andar!",
        "desc-long-4": "ğŸ Jogue em <b>solo</b> ou com atÃ© 4 amigos em <b>cooperativo local</b>.",
        "screenshot-title": "Capturas de tela",

        "translation-disclaimer": "As traduÃ§Ãµes com (*) foram feitas com a ajuda de um modelo de IA generativa. Por favor, entre em contato se quiser me ajudar com traduÃ§Ãµes feitas por humanos!",
        "contact": "Contato:",
        "email-disclaimer": "(as respostas podem vir de um endereÃ§o diferente)",
        "footer-source": "CÃ³digo-fonte deste site",
        "footer-author": "LÃ©o Bernard (Yolwoocle)"
    },
};

const defaultLocale = "en";
let locale;

document.addEventListener("DOMContentLoaded", () => {
    let localeToSet = getDefaultLocale();
    
    // alert(localeToSet);
    setLocale(localeToSet);
    bindLocaleSwitcher(localeToSet);
});

function getDefaultLocale() {
    if (typeof(Storage) !== "undefined") {
        const savedLocale = localStorage.getItem("locale")
        if (savedLocale !== null && (savedLocale in translations)) {
            return savedLocale
        }
    }

    const userLanguage = (navigator.language || navigator.userLanguage).slice(0,2);
    if (userLanguage in translations) {
        return userLanguage;
    } 
    return defaultLocale;      
}

function setLocale(newLocale) {
    if (newLocale == locale)  {
        return;
    }
    if ((newLocale in translations) === false) {
        return;
    }
    locale = newLocale;
    translatePage();
    saveLocale();
}

function translatePage() {
    document
        .querySelectorAll("[data-i18n-key]")
        .forEach(translateElement);
}

function saveLocale() {
    // Check browser support
    if (typeof(Storage) !== "undefined") {
        // Store
        localStorage.setItem("locale", locale);
    } else {
        alert("Sorry, your browser does not support Web Storage...");
    }
}

function translateElement(element) {
    const key = element.getAttribute("data-i18n-key");
    const translation = translations[locale][key] ?? translations[defaultLocale][key];
    element.innerHTML = translation;
}

// Whenever the user selects a new locale, we
// load the locale's translations and update
// the page
function bindLocaleSwitcher(initialValue) {
    const switcher = document.querySelector("[data-i18n-switcher]");
    switcher.value = initialValue;
    switcher.onchange = (e) => {
        // Set the locale to the selected option[value]
        setLocale(e.target.value);
    };
}